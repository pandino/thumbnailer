<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Thumbnailer - Slideshow</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body class="slideshow-page">
    <div class="slideshow-container">
        <div class="slideshow-header">
            <a href="/" class="back-button">â† Back to Control</a>
            <div class="slideshow-info">
                <span class="movie-title">{{.Thumbnail.MovieFilename}}</span>
                <span class="slideshow-counter">Thumbnail {{.Current}} of {{.Total}}</span>
                {{if eq .Thumbnail.Status "deleted"}}
                <span class="deletion-status">Pending Deletion</span>
                {{end}}
            </div>
            <div class="slideshow-actions">
                <form action="/slideshow/mark-viewed" method="post" id="mark-viewed-form">
                    <input type="hidden" name="path" value="{{.Thumbnail.ThumbnailPath}}">
                    <button type="submit" class="action-icon-button" title="Mark as viewed" {{if eq .Thumbnail.Status "deleted"}}disabled{{end}}>
                        <span class="action-icon">ğŸ‘ï¸</span>
                    </button>
                </form>
                <form action="/slideshow/delete" method="post" id="delete-form" onsubmit="return confirm('Are you sure you want to mark this movie for deletion? It will be deleted during the next cleanup job.');">
                    <input type="hidden" name="path" value="{{.Thumbnail.MoviePath}}">
                    <button type="submit" class="action-icon-button danger" title="Delete movie" {{if eq .Thumbnail.Status "deleted"}}disabled{{end}}>
                        <span class="action-icon">ğŸ—‘ï¸</span>
                    </button>
                </form>
            </div>
        </div>

        <div class="thumbnail-display">
            <img src="/thumbnails/{{.Thumbnail.ThumbnailPath}}" alt="{{.Thumbnail.MovieFilename}}" class="thumbnail-image {{if eq .Thumbnail.Status "deleted"}}pending-deletion{{end}}">
        </div>

        <div class="movie-details">
            <div class="detail-item">
                <span class="detail-label">Duration:</span>
                <span class="detail-value">{{.Thumbnail.GetDurationFormatted}}</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">Resolution:</span>
                <span class="detail-value">{{.Thumbnail.GetResolution}}</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">Created:</span>
                <span class="detail-value">{{.Thumbnail.CreatedAt.Format "Jan 02, 2006 15:04:05"}}</span>
            </div>
        </div>

        <div class="slideshow-nav">
            <a href="/slideshow/previous?current={{.Thumbnail.ID}}" class="nav-button prev">Previous</a>
            <a href="/slideshow/next?current={{.Thumbnail.ID}}" class="nav-button next">Next</a>
        </div>

        <div class="keyboard-shortcuts">
            <p>Keyboard shortcuts: <span class="shortcut">â† Previous</span> <span class="shortcut">â†’ or Space Next</span> <span class="shortcut">M Mark as viewed</span> <span class="shortcut">D Delete</span> <span class="shortcut">Esc Back to control</span></p>
        </div>
    </div>

    <script src="/static/js/slideshow.js"></script>
</body>
</html>
